{"ast":null,"code":"import { InferenceSession, Tensor } from 'onnxruntime-web';\nlet session = null;\nexport async function initFaceModel() {\n  if (session) return session;\n  session = await InferenceSession.create(process.env.PUBLIC_URL + '/models/face_security.onnx', {\n    executionProviders: ['wasm'],\n    graphOptimizationLevel: 'all'\n  });\n  return session;\n}\nexport async function getEmbeddingFromImageData(imageData) {\n  const sess = await initFaceModel();\n  const inputTensor = new Tensor('float32', imageData, [1, 3, 160, 160]);\n  const outputMap = await sess.run({\n    input: inputTensor\n  });\n  return outputMap.output.data;\n}","map":{"version":3,"names":["InferenceSession","Tensor","session","initFaceModel","create","process","env","PUBLIC_URL","executionProviders","graphOptimizationLevel","getEmbeddingFromImageData","imageData","sess","inputTensor","outputMap","run","input","output","data"],"sources":["/Users/hiep/Documents/FaceID test/faceid-react-starter/src/onnx/faceModel.js"],"sourcesContent":["import { InferenceSession, Tensor } from 'onnxruntime-web';\nlet session = null;\nexport async function initFaceModel() {\n  if (session) return session;\n  session = await InferenceSession.create(\n    process.env.PUBLIC_URL + '/models/face_security.onnx',\n    { executionProviders: ['wasm'], graphOptimizationLevel: 'all' }\n  );\n  return session;\n}\nexport async function getEmbeddingFromImageData(imageData) {\n  const sess = await initFaceModel();\n  const inputTensor = new Tensor('float32', imageData, [1, 3, 160, 160]);\n  const outputMap = await sess.run({ input: inputTensor });\n  return outputMap.output.data;\n}"],"mappings":"AAAA,SAASA,gBAAgB,EAAEC,MAAM,QAAQ,iBAAiB;AAC1D,IAAIC,OAAO,GAAG,IAAI;AAClB,OAAO,eAAeC,aAAaA,CAAA,EAAG;EACpC,IAAID,OAAO,EAAE,OAAOA,OAAO;EAC3BA,OAAO,GAAG,MAAMF,gBAAgB,CAACI,MAAM,CACrCC,OAAO,CAACC,GAAG,CAACC,UAAU,GAAG,4BAA4B,EACrD;IAAEC,kBAAkB,EAAE,CAAC,MAAM,CAAC;IAAEC,sBAAsB,EAAE;EAAM,CAChE,CAAC;EACD,OAAOP,OAAO;AAChB;AACA,OAAO,eAAeQ,yBAAyBA,CAACC,SAAS,EAAE;EACzD,MAAMC,IAAI,GAAG,MAAMT,aAAa,CAAC,CAAC;EAClC,MAAMU,WAAW,GAAG,IAAIZ,MAAM,CAAC,SAAS,EAAEU,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,CAAC;EACtE,MAAMG,SAAS,GAAG,MAAMF,IAAI,CAACG,GAAG,CAAC;IAAEC,KAAK,EAAEH;EAAY,CAAC,CAAC;EACxD,OAAOC,SAAS,CAACG,MAAM,CAACC,IAAI;AAC9B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}